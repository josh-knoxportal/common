/*
	Dashboard version 0.6.0 alpha
	(c) 2016 Epistemex
	www.epistemex.com
	MIT License
*/
function Dashboard(A){A=A||{};var z=this,B=A.idPrefix?A.idPrefix+"_":"",d=0,D=A.tabIndexStart||1,x=!1,b=A.callback,t=document,j=t.createElement.bind(t),u=t.getElementById.bind(t),s=h(),E;s.className=A.css||"dashboard";if(A.id){s.id=A.id}function a(H){for(var G=1,F=arguments;G<F.length;G++){H.appendChild(F[G])}}function C(H,F,G){if(F.cb){H.__cb=F.cb.bind(G)}}function w(F){return typeof F==="boolean"}function y(F){return typeof F==="string"}function p(F,K,J,P,N,I,O){var H=o(F),G=n(F),L=m(F,"range"),M=q(F.id+"v",O?O(P):P);L.min=K;L.max=J;L.step=N;L.value=Math.max(K,Math.min(J,P));L.tabIndex=D++;L.disabled=F.dis;L.__v=M;L.__type="slider";L.__tr=O;L.__bind=F.bind;C(L,F,H);if(I){L.oninput=c}else{L.onchange=c;L.oninput=v}a(H,G,L,M);a(s,H)}function f(F,H){var J=o(F),I=n(F),G=m(F,"checkbox");G.checked=H;G.tabIndex=D++;G.disabled=F.dis;G.onchange=c;G.__type="checkbox";G.__bind=F.bind;C(G,F,J);a(J,I,G);a(s,J)}function r(F,J,I){var H=o(F),G=n(F),K=m(F,"textbox");K.value=J;K.tabIndex=D++;K.disabled=F.dis;K.onchange=c;K.__type="textbox";K.__bind=F.bind;C(K,F,H);if(F.cb){K.__cb=F.cb.bind(H)}if(I){K.onkeyup=c}a(H,G,K);a(s,H)}function l(F,J){var I=o(F),H=n(F),G=j("i");G.id=F.id;G.innerHTML=J;G.disabled=F.dis;G.__type="info";G.__bind=F.bind;a(I,H,G);a(s,I)}function g(F,H){var J=o(F),I=n(F),G=m(F,"color");G.value=H;G.tabIndex=D++;G.disabled=F.dis;G.onchange=c;G.__type="color";G.__bind=F.bind;C(G,F,J);a(J,I,G);a(s,J)}function i(F,I){var H=o(F),G=n(F),J=j("select");J.id=F.id;J.tabIndex=D++;J.disabled=F.dis;J.onchange=c;J.__type="dropdown";J.__bind=F.bind;C(J,F,H);I.forEach(function(K){var L=j("option");L.innerHTML=K;a(J,L)});a(H,G,J);a(s,H)}function e(F,H){var J=o(F),I=n(F),G=j("button");G.id=F.id;G.innerHTML=H;G.tabIndex=D++;G.disabled=F.dis;G.onclick=c;G.__type="button";G.__bind=F.bind;C(G,F,J);a(J,I,G);a(s,J)}function k(F,I){var H=o(F),G=new Image;G.id=F.id;G.src=I;G.tabIndex=D++;G.disabled=F.dis;G.onclick=c;G.__type="image";G.__bind=F.bind;C(G,F,H);a(H,G);a(s,H)}function h(){return j("div")}function o(F){var G=h();G.className=F.css||"line";if(!F.show){G.style.display="none"}return G}function q(F,H){var G=j("span");G.id=F;G.innerHTML=H;return G}function m(F,H){var G=j("input");G.id=F.id;G.type=H;return G}function n(F){var G=j("label");G.setAttribute("for",F.id);G.innerHTML=F.lbl;return G}function c(){if(this.__v){this.__v.innerHTML=this.__tr?this.__tr(this.value):this.value}if(this.__cb){var F=z.value(this);if(this.__old!==F||this.__type==="button"){clearTimeout(E);E=setTimeout(this.__cb({id:this.id.substr(B.length),target:this,type:this.__type,value:F,timestamp:Date.now()}),7);this.__old=F}}}function v(){this.__v.innerHTML=this.__tr?this.__tr(this.value):this.value}this.add=function(H){d++;var F={id:B+(H.id||H.type+d),dis:!(w(H.enabled)?H.enabled:!0),css:H.css,show:w(H.show)?H.show:!0,lbl:H.label||(H.type+d),cb:H.callback||b,bind:H.bind||null},G,J,I;switch(H.type){case"slider":if(Array.isArray(G=H.list)){p(F,0,G.length-1,0,1,H.live,function(K){return G[K]})}else{p(F,H.min||0,typeof H.max!=="undefined"?H.max:100,typeof H.value!=="undefined"?H.value:50,H.step||1,H.live,H.formatter)}break;case"checkbox":f(F,!!H.checked);break;case"textbox":r(F,H.text||"",H.live);break;case"color":g(F,H.color||"red");break;case"dropdown":i(F,H.list);break;case"button":e(F,H.text||H.type+d);break;case"separator":a(s,j("hr"));break;case"info":l(F,H.text||"");break;case"text":J=o(F);if(H.raw){J.innerHTML=H.text||""}else{I=j("p");I.innerHTML=H.text||"";if(H.id){I.id=F.id}a(J,I)}a(s,J);break;case"image":k(F,H.url);break;default:throw"Unknown type"}return this};this.rem=function(F){var G=y(F)?u(B+F):F,H;if(!G||!G.__type){throw"Unknown control"}H=G.parentNode;H.parentNode.removeChild(H);return this};this.value=function(G,K){var I=y(G)?u(B+G):G;if(I&&I.__type){if(arguments.length===2){switch(I.__type){case"slider":I.value=I.__v.innerHTML=K;break;case"checkbox":I.checked=K;break;case"image":I.src=K;break;case"color":case"textbox":I.value=K;break;case"info":case"button":I.innerHTML=K;break;case"dropdown":if(typeof K==="number"){if(K>=0&&K<I.options.length){I.selectedIndex=K}}else{if(typeof K==="string"){for(var F=0,J=I.options,H=J.length;F<H;F++){if(J[F].innerHTML===K){I.selectedIndex=F;break}}}}break}return this}else{switch(I.__type){case"slider":return +I.value;case"checkbox":return !!I.checked;case"image":return I.src;case"color":case"textbox":return I.value;case"info":case"button":return I.innerHTML;case"dropdown":return I.selectedIndex}}}};this.enable=function(F,H){var G=y(F)?u(B+F):F;if(G&&G.__type){G.disabled=!H}return this};this.show=function(F,H){if(arguments.length===1){s.style.display=F?null:"none"}else{var G=y(F)?u(B+F):F;if(G&&G.__type){G.parentNode.style.display=H?null:"none"}}return this};this.init=function(F){if(!x){(F||t.body).appendChild(s);x=!0}return this};this.bindTo=function(I){if(y(I)){I=JSON.parse(I)}var G=s.querySelectorAll("*"),F,H=0;while(F=G[H++]){if(F.__bind&&typeof I[F.__bind]!=="undefined"){this.value(F,I[F.__bind])}}};this.getBound=function(){var I={},F,H=0,G=s.querySelectorAll("*");while(F=G[H++]){if(y(F.__bind)){I[F.__bind]=this.value(F)}}return I}};